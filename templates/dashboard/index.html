{% extends "base.html" %}

{% block content %}
    <h1>Your Dashboard</h1>

    <div class="dashboard-grid">
        
        <div>
            <section>
                <h2>Create New Task</h2>
                <form method="post">
                    {% csrf_token %}
                    {{ task_form.as_p }}
                    <button type="submit" name="submit_task">Save Task</button>
                </form>
            </section>
            
            <section>
                <h2>Create New Note</h2>
                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    {{ note_form.as_p }}
                    <button type="submit" name="submit_note">Save Note</button>
                </form>
            </section>
        </div>

        <div>
            <section>
                <h2>Your Tasks</h2>
                <ul>
                    {% for task in tasks %}
                        <li>
                            <span>
                                {{ task.title }}
                                <small style="color: #888;">({{ task.get_completed_display }})</small>
                            </span>
                        </li>
                    {% empty %}
                        <li>No tasks found.</li>
                    {% endfor %}
                </ul>
            </section>

            <section>
                <h2>Your Notes</h2>
                <ul>
                    {% for note in notes %}
                        <li>
                            <span>
                                {{ note.title }}
                                {% if note.task %}
                                <small style="color: #888;">(Task: {{ note.task.title }})</small>
                                {% endif %}
                            </span>
                            {% if note.file %}
                                <a href="{{ note.file.url }}" target="_blank">View File</a>
                            {% endif %}
                        </li>
                    {% empty %}
                        <li>No notes found.</li>
                    {% endfor %}
                </ul>
            </section>
        </div>
    </div>
{% endblock %}